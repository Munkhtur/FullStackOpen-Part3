(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=t(16),i=t(3),l=function(e){var n=e.searchTerm,t=e.handleSearch;return r.a.createElement("div",null,r.a.createElement("div",null,"Filter shown",r.a.createElement("input",{value:n,onChange:t})))},s=function(e){var n=e.handleSubmit,t=e.handleChange,a=e.handleNumber,c=e.newName,o=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:c,onChange:t})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.personToShow,t=e.handleClick;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement("li",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return t(e.id)}},"delete"))})))},f=t(2),d=t.n(f),p=t(4),h=t(5),b=t.n(h),v=function(){var e=Object(p.a)(d.a.mark((function e(){var n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.get("/api/persons"),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(d.a.mark((function e(n){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/persons",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(d.a.mark((function e(n,t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat("/api/persons","/").concat(n),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(d.a.mark((function e(n){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat("/api/persons","/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(e){var n=e.notification;return null===n?null:r.a.createElement("div",{className:n.type},n.message)},g=(t(40),function(){Object(a.useEffect)((function(){v().then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]);var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),f=Object(i.a)(o,2),d=f[0],p=f[1],h=Object(a.useState)(""),b=Object(i.a)(h,2),g=b[0],C=b[1],L=Object(a.useState)(""),S=Object(i.a)(L,2),k=S[0],x=S[1],y=Object(a.useState)(!0),N=Object(i.a)(y,2),T=N[0],D=N[1],J=Object(a.useState)(null),A=Object(i.a)(J,2),B=A[0],F=A[1],I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";F({message:e,type:n}),setTimeout((function(){F(null)}),5e3)},M=T?t:t.filter((function(e){return e.name.toLocaleLowerCase()===k.toLocaleLowerCase()}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{notification:B}),r.a.createElement(l,{searchTerm:k,handleSearch:function(e){x(e.target.value),t.some((function(n){return n.name.toLocaleLowerCase()===e.target.value.toLocaleLowerCase()}))&&D(!1),k.length<=1&&D(!0)}}),r.a.createElement("h3",null,"Add new contact"),r.a.createElement(s,{handleSubmit:function(e){e.preventDefault();var n={name:d,number:g};if(t.some((function(e){return e.name.toLocaleLowerCase()===d.toLocaleLowerCase()}))){var a=t.filter((function(e){return e.name.toLocaleLowerCase()===d.toLocaleLowerCase()}));if(window.confirm("".concat(a[0].name," already exist, replace the number? "))){var r=a[0].id,o=Object(u.a)({},a[0],{number:g});E(r,o).then((function(e){c(t.map((function(n){return n.id!==r?n:e}))),I("".concat(o.name," is updated")),p(""),C("")})).catch((function(e){I("".concat(e," occured"),"error")}))}}else w(n).then((function(e){c(t.concat(e)),I("".concat(n.name," is created"))})).catch((function(e){I("".concat(e," occured"),"error")})),p(""),C("")},handleChange:function(e){p(e.target.value)},handleNumber:function(e){C(e.target.value)},newName:d,newNumber:g}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{personToShow:M,handleClick:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&j(e).then((function(a){c(t.filter((function(n){return n.id!==e}))),I("".concat(n.name," is deleted")),console.log(a)})).catch((function(e){I("".concat(n.name," could not be found"),"error")}))}}))});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.3c89c2b5.chunk.js.map