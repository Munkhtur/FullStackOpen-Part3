(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=t(3),i=function(e){var n=e.searchTerm,t=e.handleSearch;return r.a.createElement("div",null,r.a.createElement("div",null,"Filter shown",r.a.createElement("input",{value:n,onChange:t})))},l=function(e){var n=e.handleSubmit,t=e.handleChange,a=e.handleNumber,c=e.newName,o=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:c,onChange:t})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.personToShow,t=e.handleClick;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement("li",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return t(e.id)}},"delete"))})))},f=t(2),m=t.n(f),d=t(4),p=t(5),h=t.n(p),b="/api/persons",v=function(){var e=Object(d.a)(m.a.mark((function e(){var n,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a.get(b),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(b,"/name/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(b,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(m.a.mark((function e(n,t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("".concat(b,"/").concat(n),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("".concat(b,"/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(e){var n=e.notification;return null===n?null:r.a.createElement("div",{className:n.type},n.message)},k=(t(39),function(){Object(a.useEffect)((function(){v().then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]);var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),f=Object(u.a)(o,2),m=f[0],d=f[1],p=Object(a.useState)(""),h=Object(u.a)(p,2),b=h[0],k=h[1],C=Object(a.useState)(""),S=Object(u.a)(C,2),x=S[0],L=S[1],y=Object(a.useState)(!0),N=Object(u.a)(y,2),T=N[0],D=N[1],J=Object(a.useState)(null),A=Object(u.a)(J,2),B=A[0],F=A[1],I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";F({message:e,type:n}),setTimeout((function(){F(null)}),5e3)},M=T?t:t.filter((function(e){return e.name.toLocaleLowerCase()===x.toLocaleLowerCase()}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{notification:B}),r.a.createElement(i,{searchTerm:x,handleSearch:function(e){L(e.target.value),t.some((function(n){return n.name.toLocaleLowerCase()===e.target.value.toLocaleLowerCase()}))&&D(!1),x.length<=1&&D(!0)}}),r.a.createElement("h3",null,"Add new contact"),r.a.createElement(l,{handleSubmit:function(e){e.preventDefault();var n={name:m,number:b};t.some((function(e){return e.name.toLocaleLowerCase()===m.toLocaleLowerCase()}))?w(m).then((function(e){e&&(window.confirm("".concat(m," already exist, replace the number? "))&&(g(e.id,n).then((function(a){var r=t.filter((function(n){return n.id!==e.id}));console.log(r),c(r),c(t.concat(a)),I("".concat(n.name," is updated"))})).catch((function(e){I("".concat(e," occured"),"error"),console.log(e.response.data)})),d(""),k("")))})):(E(n).then((function(e){c(t.concat(e)),I("".concat(n.name," is created"))})).catch((function(e){I("".concat(e.response.data.error),"error"),console.log(e.response.data.error)})),d(""),k(""))},handleChange:function(e){d(e.target.value)},handleNumber:function(e){k(e.target.value)},newName:m,newNumber:b}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{personToShow:M,handleClick:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&j(e).then((function(a){c(t.filter((function(n){return n.id!==e}))),I("".concat(n.name," is deleted")),console.log(a)})).catch((function(e){I("".concat(n.name," could not be found"),"error")}))}}))});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ff8682f9.chunk.js.map